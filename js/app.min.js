'use strict';(function(){var b=1,c=3,d=[],f=!!('localStorage'in window),g=function(r,s,t){f&&localStorage.setItem('gamestate',JSON.stringify({level:b,lives:c,guessedColors:s,completedLevels:d,currentSvg:r.innerHTML,completed:t}))},j=function(){f&&localStorage.removeItem('gamestate')},k=function h(){if(f){var r=JSON.parse(localStorage.getItem('gamestate'));if(r)return b=r.level,c=r.lives,d=r.completedLevels,r.completedLevels&&r.completedLevels.forEach(function(s){svgs.splice(s,1)}),r}return!1}(),l=document.querySelector('[role="status"]'),m=document.querySelector('main'),n=document.querySelectorAll('nav a'),o=function(){return'<button aria-disabled="true">'+c+' &#x2764;&#xFE0F;</button>'},p=function(r){if('true'===r.target.getAttribute('aria-hidden')||l.classList.contains('next')||l.classList.contains('gameover'))return(l.classList.contains('next')||l.classList.contains('gameover'))&&l.querySelector('button').focus(),!1;r.preventDefault();var s=r.target.className,t=document.querySelector('.current.svg'),u=!1;return s&&t&&(l.className='',r.target.setAttribute('aria-disabled','true'),t.classList.add(s),Array.prototype.forEach.call(document.querySelectorAll('.current.svg .color.'+s),function(v){v.classList.remove('color'),u=!0}),setTimeout(function(){document.querySelectorAll('.current.svg .color').length?u?(l.innerHTML='<div><h1>Level '+b+'</h1><p>Correct! Keep guessing!</p></div>'+o(),l.className='correct',g(t,t.className)):(c-=1,0>=c?(l.innerHTML='<div><h1>Game over!</h1><p>Level '+b+'</div><button class="playagain">Play again &#x1F504;</button>',l.className='wrong gameover',j()):(l.innerHTML='<div><h1>Level '+b+'</h1><p>Wrong! Try again!</p></div>'+o(),l.className='wrong',g(t,t.className))):(c+=1,l.innerHTML='<div><h1>Level '+b+'</h1><p>Correct! +1 &#x2764;&#xFE0F;</p></div><button class="nextlevel">Next level &#x27A1;&#xFE0F;</button>',l.className='correct next',g(t,t.className,!0))},100)),!0},q=function(r){var s=Math.floor(Math.random()*svgs.length),t=r?r.currentSvg:svgs[s];if(t){var u=document.createElement('div'),v=document.querySelector('.svg.current');u.className='svg new',u.innerHTML=t,m.appendChild(u),r||(d.push(s),svgs.splice(s,1)),v&&(v.classList.remove('current'),v.classList.add('done'),setTimeout(function(){m.removeChild(v)},600)),setTimeout(function(){u.classList.remove('new'),u.classList.add('current'),r&&r.guessedColors&&(u.className=r.guessedColors),g(u,u.className)},500),Array.prototype.forEach.call(n,function(w,x){setTimeout(function(){w.setAttribute('aria-disabled','false'),r&&r.guessedColors&&-1<r.guessedColors.indexOf(w.className)&&w.setAttribute('aria-disabled','true')},50*x)}),l.className='',setTimeout(function(){if(r&&r.completed){var w=r.guessedColors.split(' ')[r.guessedColors.split(' ').length-1];setTimeout(function(){p({target:document.querySelector('nav.colors .'+w),preventDefault:function preventDefault(){c-=1}})},600)}else l.className='status',l.innerHTML='<div><h1>Level '+b+'</h1><p>Start guessing!</p></div>'+o()},100)}};Array.prototype.forEach.call(n,function(r){r.addEventListener('click',p,!1)}),document.addEventListener('click',function(r){r.target.classList.contains('playagain')&&document.location.reload(),r.target.classList.contains('nextlevel')&&(svgs&&svgs.length?(b+=1,q()):(l.innerHTML='<div><h1>You made it!</h1><p>Good job!</p></div><button class="playagain">Play again &#x1F504;</button>',l.className='correct gameover',j()))}),svgs&&svgs.length?q(k):(l.innerHTML='<div><h1>Something went wrong!</h1></div><button class="playagain">Play again &#x1F504;</button>',l.className='wrong gameover')})();