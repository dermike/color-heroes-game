'use strict';(function(){var b=1,c=3,d=!!('localStorage'in window),f=function(q,r,s){d&&localStorage.setItem('gamestate',JSON.stringify([b,c,svgs,r,q.innerHTML,s]))},h=function(){d&&localStorage.removeItem('gamestate')},j=function g(){if(d){var q=JSON.parse(localStorage.getItem('gamestate'));if(q)return b=q[0],c=q[1],svgs=q[2],[q[3],q[4],q[5]]}return!1}(),k=document.querySelector('[role="status"]'),l=document.querySelector('main'),m=document.querySelectorAll('nav a'),n=function(){return'<button aria-disabled="true">'+c+' &#x2764;&#xFE0F;</button>'},o=function(q){if('hidden'===q.target.style.visibility||k.classList.contains('next')||k.classList.contains('gameover'))return(k.classList.contains('next')||k.classList.contains('gameover'))&&k.querySelector('button').focus(),!1;q.preventDefault();var r=q.target.className,s=document.querySelector('.current.svg'),t=!1;return r&&s&&(k.className='',q.target.setAttribute('aria-disabled','true'),s.classList.add(r),Array.prototype.forEach.call(document.querySelectorAll('.current.svg .color.'+r),function(u){u.classList.remove('color'),t=!0}),setTimeout(function(){document.querySelectorAll('.current.svg .color').length?t?(k.innerHTML='<div><h1>Niv\xE5 '+b+'</h1><p>R\xE4tt! Forts\xE4tt gissa!</p></div>'+n(),k.className='correct',f(s,s.className)):(c-=1,0>=c?(k.innerHTML='<div><h1>Game over!</h1><p>Niv\xE5 '+b+'</div><button class="playagain">Spela igen &#x1F504;</button>',k.className='wrong gameover',h()):(k.innerHTML='<div><h1>Niv\xE5 '+b+'</h1><p>Fel! F\xF6rs\xF6k igen!</p></div>'+n(),k.className='wrong',f(s,s.className))):(c+=1,k.innerHTML='<div><h1>Niv\xE5 '+b+'</h1><p>R\xE4tt! +1 &#x2764;&#xFE0F;</p></div><button class="nextlevel">N\xE4sta niv\xE5 &#x27A1;&#xFE0F;</button>',k.className='correct next',f(s,s.className,!0))},100)),!0},p=function(q){var r=Math.floor(Math.random()*svgs.length),s=q?q[1]:svgs[r];if(s){var t=document.createElement('div'),u=document.querySelector('.svg.current');t.className='svg new',t.innerHTML=s,l.appendChild(t),q||svgs.splice(r,1),u&&(u.classList.remove('current'),u.classList.add('done'),setTimeout(function(){l.removeChild(u)},600)),f(t),setTimeout(function(){t.classList.remove('new'),t.classList.add('current'),q&&q[0]&&(t.className=q[0])},500),Array.prototype.forEach.call(m,function(v,w){setTimeout(function(){v.setAttribute('aria-disabled','false'),q&&q[0]&&-1<q[0].indexOf(v.className)&&v.setAttribute('aria-disabled','true')},50*w)}),k.className='',setTimeout(function(){if(q&&q[2]){var v=q[0].split(' ')[q[0].split(' ').length-1];setTimeout(function(){o({target:document.querySelector('nav.colors .'+v),preventDefault:function preventDefault(){c-=1}})},600)}else k.className='status',k.innerHTML='<div><h1>Niv\xE5 '+b+'</h1><p>B\xF6rja gissa!</p></div>'+n()},100)}};Array.prototype.forEach.call(m,function(q){q.addEventListener('click',o,!1)}),document.addEventListener('click',function(q){q.target.classList.contains('playagain')&&document.location.reload(),q.target.classList.contains('nextlevel')&&(svgs&&svgs.length?(b+=1,p()):(k.innerHTML='<div><h1>Du klarade det!</h1><p>Bra jobbat!</p></div><button class="playagain">Spela igen &#x1F504;</button>',k.className='correct gameover',h()))}),k.className='status',k.innerHTML='<p>Niv\xE5 '+b+'</p>'+n(),svgs&&svgs.length?p(j):(k.innerHTML='<div><h1>N\xE5got gick fel!</h1></div><button class="playagain">Spela igen &#x1F504;</button>',k.className='wrong gameover')})();